webpackJsonp([4],{476:function(e,r,t){t(515);var o=t(185)(t(486),t(505),null,null);e.exports=o.exports},486:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={data:function(){var e=this,r=function(r,t,o){""===t?(console.log(t,e.register.password),o(new Error("请再次输入密码!"))):t!==e.register.password?(console.log(t,e.register.password),o(new Error("两次密码不相同!"))):(console.log(t,e.register.password),o())},t=function(e,r,t){var o=/^[a-zA-Z0-9]+$/;r.match(o)?t():t(new Error("密码仅可由数字与字母组成"))};return{activePane:"login",hostUrl:"http://localhost:8888/processmining",imgUrl:"http://localhost:8888/processmining/checkcode",login:{username:"",password:"",verCode:""},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},register:{username:"",nickname:"",password:"",repassword:"",verCode:""},registerRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{type:"email",message:"请输入正确的Email格式",trigger:"change"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{validator:function(e,r,t){var o=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？\\\\]");r.indexOf(" ")>=0?t(new Error("请不要包含空格")):r.match(o)?t(new Error("请不要输入特殊字符")):r.gblen()<=4||r.gblen>=16?t(new Error("请输入4-16位字符")):t()},trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:t,trigger:"change"},{min:6,max:16,message:"长度在6-16之间",trigger:"change"}],repassword:[{validator:r,trigger:"change"}],verCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},created:function(){this.getVerCode()},methods:{changeUrl:function(){var e=this.imgUrl,r=(new Date).valueOf();return e=e.substring(0,45),e=e.indexOf("&")>=0?e+"xtamp="+r:e+"?timestamp="+r},loginForm:function(e){var r=this,t=this;t.$refs[e].validate(function(e){if(!e)return console.log("error login!!"),!1;r.$axios({url:"/user/login",method:"post",baseURL:r.hostUrl,data:{email:r.login.username,password:r.login.password,checkcode:r.login.verCode}}).then(function(e){200===e.data.code?0===e.data.type?(localStorage.setItem("ms_username",t.login.username),t.$router.push("/user/")):(localStorage.setItem("ms_username",t.login.username),t.$router.push("/admin/")):(console.log(e),console.log("code",e.data.code))}).catch(function(e){console.log("【Error】:",e)})})},registerForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return console.log("error register!!"),!1;var t=r.$createElement;r.$notify({title:"注册信息",message:t("pre",{style:"color: teal"},"\n邮箱: "+r.register.username+"\n昵称: "+r.register.nickname+"\n密码: "+r.register.repassword)}),r.$axios({url:"/user/register",method:"post",baseURL:r.hostUrl,data:{email:r.register.username,password:r.register.password,checkcode:r.register.verCode,nickname:r.register.nickname}}).then(function(e){200===e.data.code?r.$notify({title:"成功",message:"注册成功!",type:"success"}):console.log(e.data.code)}).catch(function(e){r.$notify({title:"失败",message:"注册失败: 请重试!",type:"error"}),console.log("【Error】:",e)})})},goToRegister:function(){this.activePane="register"},goToLogin:function(){this.activePane="login"},getVerCode:function(){var e=this;this.$axios({url:"/checkcode",method:"get",baseURL:this.hostUrl}).then(function(r){e.login.imgUrl=r}).catch(function(e){console.log("【Error】:",e)})},updateVerCode:function(){var e=this;e.getVerCode(),e.imgUrl=e.changeUrl(),console.log(e.imgUrl)}}}},493:function(e,r,t){r=e.exports=t(82)(void 0),r.push([e.i,"#toLogin,#toRegister{cursor:pointer;font-size:12px;line-height:30px;color:#999}#login,#register{color:#fff;font-weight:700}#help,#login,#register{cursor:help;text-decoration:underline}img{float:right;height:34px;width:100%;font-size:inherit;display:inline-block;border-radius:4px;border:1px solid #bfcbd9}.login-btn span{text-decoration:none}.el-tabs__item{padding:0 60px}.login-wrap{position:relative;width:100%;height:100%}.ms-title{width:100%;margin-top:-230px;text-align:center;font-size:32px;color:#fff}.ms-login,.ms-title{position:absolute;top:50%}.ms-login{left:50%;width:300px;height:300px;margin:-220px 0 0 -190px;padding:40px;border-radius:5px}.footer{cursor:pointer;position:absolute;bottom:5px;left:50%;width:380px;margin:0 0 0 -190px;font-size:5px;color:#999}.footer,.login-btn{text-align:center}.login-btn button{width:100%;height:36px}",""])},505:function(e,r){e.exports={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login-wrap"},[t("div",{staticClass:"ms-title"},[e._v("流程挖掘平台")]),e._v(" "),t("div",{staticClass:"ms-login"},[t("el-tabs",{model:{value:e.activePane,callback:function(r){e.activePane=r},expression:"activePane"}},[t("el-tab-pane",{attrs:{label:"登录",name:"login"}},[t("el-form",{ref:"login",attrs:{model:e.login,rules:e.loginRules,"label-width":"0px"}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.login.username,callback:function(r){e.login.username=r},expression:"login.username"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.login.password,callback:function(r){e.login.password=r},expression:"login.password"}})],1),e._v(" "),t("el-form",{ref:"login",attrs:{model:e.login,rules:e.loginRules,"label-width":"0px"}},[t("el-form-item",{attrs:{prop:"verCode"}},[t("el-popover",{ref:"a",attrs:{placement:"right-end",trigger:"hover"}},[t("img",{attrs:{src:e.imgUrl,alt:"验证码图片",width:"200px"},on:{click:e.updateVerCode}})]),e._v(" "),t("el-input",{directives:[{name:"popover",rawName:"v-popover:a",arg:"a"}],attrs:{placeholder:"验证码"},nativeOn:{keyup:function(r){if(!("button"in r)&&e._k(r.keyCode,"enter",13))return null;e.loginForm("login")}},model:{value:e.login.verCode,callback:function(r){e.login.verCode=r},expression:"login.verCode"}})],1)],1),e._v(" "),t("div",{staticClass:"login-btn"},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.loginForm("login")}}},[e._v("登录")])],1),e._v(" "),t("div",[t("br"),e._v(" "),t("p",{attrs:{id:"toRegister"}},[e._v("Tips : 没有账号？"),t("span",{attrs:{id:"register"},on:{click:e.goToRegister}},[e._v("请注册 ")])])])],1)],1),e._v(" "),t("el-tab-pane",{attrs:{label:"注册",name:"register"}},[t("el-form",{ref:"register",attrs:{model:e.register,rules:e.registerRules,"label-width":"0px"}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.register.username,callback:function(r){e.register.username=r},expression:"register.username"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"nickname"}},[t("el-input",{attrs:{placeholder:"昵称"},model:{value:e.register.nickname,callback:function(r){e.register.nickname=r},expression:"register.nickname"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入6-20位密码"},model:{value:e.register.password,callback:function(r){e.register.password=r},expression:"register.password"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"repassword"}},[t("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.register.repassword,callback:function(r){e.register.repassword=r},expression:"register.repassword"}})],1),e._v(" "),t("el-form",{ref:"register",attrs:{model:e.register,rules:e.registerRules,"label-width":"0px"}},[t("el-form-item",{attrs:{prop:"verCode"}},[t("el-popover",{ref:"b",attrs:{placement:"right-end",trigger:"hover"}},[t("img",{attrs:{src:e.imgUrl,alt:"验证码图片",width:"200px"},on:{click:e.updateVerCode}})]),e._v(" "),t("el-input",{directives:[{name:"popover",rawName:"v-popover:b",arg:"b"}],attrs:{placeholder:"验证码"},nativeOn:{keyup:function(r){if(!("button"in r)&&e._k(r.keyCode,"enter",13))return null;e.registerForm("register")}},model:{value:e.register.verCode,callback:function(r){e.register.verCode=r},expression:"register.verCode"}})],1)],1),e._v(" "),t("div",{staticClass:"login-btn"},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.registerForm("register")}}},[e._v("注册")])],1),e._v(" "),t("div",[t("br"),e._v(" "),t("p",{attrs:{id:"toLogin"}},[e._v("Tips : 已有账号？"),t("span",{attrs:{id:"login"},on:{click:e.goToLogin}},[e._v("去登录 ")])])])],1)],1)],1)],1),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"footer"},[t("p",[e._v("© 2017 K2流程挖掘平台       如有问题，请联系管理员"),t("span",{attrs:{id:"help"}},[e._v("10086@qq.com")])])])}]}},515:function(e,r,t){var o=t(493);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);t(186)("19ae301f",o,!0)}});